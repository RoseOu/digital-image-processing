# 提取图像显著性区域
## 一、图像显著性检测

## 二、图像二值化
图像的二值化，就是将图像上的像素点的灰度值设置为0或255，使整个图像呈现出只有黑色和白色的视觉效果。我们可以通过设置一个阈值，判断图像的像素点的灰度值大于阈值还是小于阈值，从而判断将其设置为255还是0。那么这个阈值的设置就尤为重要。   

### 1、全局阈值（单阈值）
#### （1）最简单的方法
原理：将阈值设置为127，如果像素点的灰度值小于127，则将其灰度值设置为0，如果像素点的灰度值大于127，则将其灰度值设置为255。   
优点：简单，计算量少速度快。   
缺点：首先阈值为127没有任何理由可以解释，其次完全不考虑图像的像素分布情况与像素值特征，可能导致部分对象像素或者背景像素丢失。   
改进：可将阈值改为所有像素点的灰度值的平均值。   

#### （2）双峰法
原理：把图像看作由前景和背景组成，在灰度直方图上，前景和背景都形成一个高峰，在双峰之间的最低谷处就是图像的阈值所在。假如一张图像的直方图如下所示：
<>
从图中我们可以看到有两个顶峰，将顶峰记为H1和H2，他们对应的灰度值分别为T1和T2，那么双峰法的思想就是要找到图像两个顶峰之间的最低值作为阈值。简单来说就是，在一张图像中，灰度值为T1和T2的像素点是最多的，在[T1,T2]的灰度值范围之间，像素点最少的灰度值，就是阈值。   
优点：该方法适用于直方图有两个顶峰的图像，即背景与前景颜色差别较大的图像。   
缺点：不适合直方图曲线平坦或者只有一个顶峰的图像。   

#### （3）迭代法
原理：首先初始化一个阈值T0，然后按照某种策略通过迭代不断更新这一阈值，直到满足给定的约束条件为止。通过迭代方法选择阈值的计算方法如下：    
（1）选择图像所有像素点的灰度值的平均值作为初始阈值T0。    
（2）对于灰度值小于等于T0的像素点，计算出他们的灰度值的平均值T1；对于灰度值大于T0的像素点，计算出他们的灰度值的平均值T2。    
（3）新的阈值为T=（T1+T2）/2。    
（4）比较T和T0，若相等，则返回T，T即为迭代法得到的阈值; 否则设T0=T，重复步骤（1）~（3），直至T和T0相等。   
优点：用迭代法所获得的阈值进行二值化的图象效果良好，因为基于迭代的阈值能区分出图像的前景和背景的主要区域所在。   
缺点：但在图像的细微处（即图像的浅色线条）还没有很好的区分度。而对于某些特定图象，微小数据的变化却会引起分割效果的巨大改变。   

#### （4）otsu法（最大类间方差法/大律法）
原理：用阈值将原图像分成前景、背景两类，当取最佳阈值时，背景应该与前景差别最大，在otsu算法中衡量差别的标准就是最大类间方差。基本思想是，从0到255循环选取灰度t作为阈值，根据阈值把图像分为两类，然后计算两类之间的方差，使类间方差达到最大时的阈值，即为所求最佳阈值。
otsu的公式推导：记t为前景与背景的分割阈值，前景点数占图像比例为w0，平均灰度为u0；背景点数占图像比例为w1，平均灰度为u1。   
则图像的总平均灰度为：u=w0\*u0+w1\*u1。   
前景和背景图象的方差：g=w0\*(u0-u)\*(u0-u)+w1\*(u1-u)\*(u1-u)=w0\*w1\*(u0-u1)\*(u0-u1),此公式为方差公式。    
当方差g最大时，可以认为此时前景和背景差异最大，此时选取的灰度t是最佳阈值。    
优点：类间方差法对噪音和目标大小十分敏感，它仅对类间方差为单峰的图像产生较好的分割效果。    
缺点：当目标与背景的大小比例悬殊时（例如受光照不均、反光或背景复杂等因素影响），类间方差准则函数可能呈现双峰或多峰，此时效果不好，但是类间方差法是用时最少的。    

### 2、自适应阈值（多阈值）
上面所有选取阈值的方法，都是对图像上的每个像素使用相等的阈值。
但在实际情况中，当照明不均匀、有突发噪声或者背景变化较大时，对于整幅图像将没有合适的单一阈值，如果仍采用单一的阈值去处理每一个像素，可能会将目标和背景区域错误划分。   
而自适应阈值，就是将图像中的每个像素设置可能不一样的阈值，根据像素的邻域块的像素值分布来确定该像素位置上的阈值。
基本原理：规定一个区域大小，对每个像素确定以其自身为中心的一个区域（即其邻域），计算区域内所有像素值的平均值（或者区域内最大和最小像素值的平均值，或者区域内内所有像素值的高斯卷积），将其作为该像素点的阈值。
优点：每个像素的阈值不是都一样的，而是由其周围邻域像素的分布来决定的。亮度较高的图像区域的阈值通常会较高，而亮度较低的图像区域的阈值则会相适应地变小。
缺点：计算较为复杂。

### 3、几种方法的效果


### 4、关于图像二值化的参考资料：
https://blog.csdn.net/u011600592/article/details/75044250   
https://baike.baidu.com/item/otsu/16252828   
https://blog.csdn.net/weixin_34163553/article/details/85991870    
https://blog.csdn.net/qq_44262417/article/details/89283484     
https://blog.csdn.net/wrightman/article/details/39204265    
https://blog.csdn.net/zhu_hongji/article/details/80967776    
https://blog.csdn.net/u014737138/article/details/80379309   
https://blog.csdn.net/whl970831/article/details/99706730    
https://blog.csdn.net/fly108108/article/details/81104330#4%E3%80%81%C2%A0%E8%BF%AD%E4%BB%A3%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2   
https://blog.csdn.net/cp32212116/article/details/44487913   
https://blog.csdn.net/bravebean/article/details/51374066    
